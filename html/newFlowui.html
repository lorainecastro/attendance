<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        :root {
            /* Primary Colors */
            --primary-blue: #2563eb;
            --primary-blue-hover: #1d4ed8;
            --primary-blue-light: #dbeafe;
            
            /* Status Colors */
            --success-green: #16a34a;
            --warning-yellow: #ca8a04;
            --danger-red: #dc2626;
            --info-cyan: #0891b2;
            
            /* Neutral Colors */
            --dark-gray: #374151;
            --medium-gray: #6b7280;
            --light-gray: #d1d5db;
            --background: #f9fafb;
            --white: #ffffff;
            --border-color: #e5e7eb;
    
            /* Additional Colors */
            --card-bg: #ffffff;
            --blackfont-color: #111827;
            --whitefont-color: #ffffff;
            --grayfont-color: #6b7280;
            --primary-gradient: linear-gradient(135deg, #2563eb, #a855f7);
            --secondary-gradient: linear-gradient(135deg, #ec4899, #f472b6);
            --primary-color: #2563eb;
            --primary-hover: #1d4ed8;
            --inputfield-color: #f3f4f6;
            --inputfieldhover-color: #e5e7eb;
            
            /* Typography */
            --font-family: 'Inter', sans-serif;
            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
    
            /* Spacing */
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --spacing-2xl: 3rem;
            
            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            
            /* Border Radius */
            --radius-sm: 0.25rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
    
            /* Transitions */
            --transition-fast: 0.15s ease-in-out;
            --transition-normal: 0.3s ease-in-out;
            --transition-slow: 0.5s ease-in-out;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--background);
            color: var(--blackfont-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--spacing-lg);
        }

        /* Page Header */
        .page-header {
            background: var(--white);
            border-radius: var(--radius-xl);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--shadow-sm);
        }

        .page-title {
            font-size: var(--font-size-2xl);
            font-weight: 700;
            color: var(--blackfont-color);
            margin-bottom: var(--spacing-md);
        }

        .page-subtitle {
            color: var(--medium-gray);
            font-size: var(--font-size-lg);
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: var(--spacing-xl);
            margin-bottom: var(--spacing-xl);
        }

        .dashboard-card {
            background: var(--white);
            border-radius: var(--radius-xl);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-sm);
            transition: var(--transition-normal);
        }

        .dashboard-card:hover {
            box-shadow: var(--shadow-md);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--border-color);
        }

        .card-title {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--blackfont-color);
        }

        .card-subtitle {
            color: var(--medium-gray);
            font-size: var(--font-size-sm);
            margin-top: var(--spacing-xs);
        }

        .btn {
            padding: var(--spacing-sm) var(--spacing-md);
            border: none;
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            cursor: pointer;
            transition: var(--transition-normal);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-weight: 500;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--primary-blue-hover);
        }

        .btn-secondary {
            background: var(--white);
            color: var(--medium-gray);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--inputfield-color);
        }

        .btn-sm {
            padding: var(--spacing-xs) var(--spacing-sm);
            font-size: var(--font-size-sm);
        }

        /* Risk Assessment Panel */
        .risk-calculator {
            margin-bottom: var(--spacing-xl);
        }

        .calculator-input {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            margin-bottom: var(--spacing-xs);
            font-weight: 500;
            color: var(--blackfont-color);
        }

        .input-group input,
        .input-group select {
            padding: var(--spacing-sm);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            background: var(--inputfield-color);
            transition: var(--transition-normal);
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: var(--primary-blue);
            background: var(--white);
        }

        .risk-result {
            background: var(--inputfield-color);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            text-align: center;
            margin-bottom: var(--spacing-lg);
        }

        .risk-score {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: var(--spacing-sm);
        }

        .risk-score.high {
            color: var(--danger-red);
        }

        .risk-score.medium {
            color: var(--warning-yellow);
        }

        .risk-score.low {
            color: var(--success-green);
        }

        .risk-level {
            font-size: var(--font-size-lg);
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
        }

        .risk-description {
            color: var(--medium-gray);
            font-size: var(--font-size-sm);
        }

        /* Risk Indicators */
        .risk-indicators {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }

        .indicator-card {
            background: var(--white);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--spacing-md);
            text-align: center;
            transition: var(--transition-normal);
        }

        .indicator-card.high {
            border-color: var(--danger-red);
            background: rgba(220, 38, 38, 0.05);
        }

        .indicator-card.medium {
            border-color: var(--warning-yellow);
            background: rgba(202, 138, 4, 0.05);
        }

        .indicator-card.low {
            border-color: var(--success-green);
            background: rgba(22, 163, 74, 0.05);
        }

        .indicator-emoji {
            font-size: 2rem;
            margin-bottom: var(--spacing-sm);
        }

        .indicator-count {
            font-size: var(--font-size-xl);
            font-weight: 700;
            color: var(--blackfont-color);
        }

        .indicator-label {
            color: var(--medium-gray);
            font-size: var(--font-size-sm);
        }

        /* Student List */
        .student-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .student-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--spacing-md);
            border-bottom: 1px solid var(--border-color);
            transition: var(--transition-normal);
        }

        .student-item:hover {
            background: var(--inputfield-color);
        }

        .student-info {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .student-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: 600;
            font-size: var(--font-size-sm);
        }

        .student-details h5 {
            margin-bottom: var(--spacing-xs);
            color: var(--blackfont-color);
        }

        .student-details p {
            color: var(--medium-gray);
            font-size: var(--font-size-sm);
        }

        .student-risk-badge {
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-sm);
            font-weight: 600;
            color: var(--white);
        }

        .student-risk-badge.high {
            background: var(--danger-red);
        }

        .student-risk-badge.medium {
            background: var(--warning-yellow);
        }

        .student-risk-badge.low {
            background: var(--success-green);
        }

        /* Early Warning Alerts */
        .alerts-section {
            margin-top: var(--spacing-lg);
        }

        .alert-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            padding: var(--spacing-md);
            border-radius: var(--radius-md);
            margin-bottom: var(--spacing-md);
            border-left: 4px solid var(--danger-red);
            background: rgba(220, 38, 38, 0.05);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .alert-icon {
            color: var(--danger-red);
            font-size: 1.25rem;
        }

        .alert-content h6 {
            margin-bottom: var(--spacing-xs);
            color: var(--blackfont-color);
        }

        .alert-content p {
            color: var(--medium-gray);
            font-size: var(--font-size-sm);
        }

        .alert-time {
            color: var(--medium-gray);
            font-size: var(--font-size-sm);
            margin-left: auto;
        }

        /* Chart Containers */
        .chart-container {
            position: relative;
            height: 400px;
            margin-top: var(--spacing-md);
        }

        .chart-container.small {
            height: 250px;
        }

        /* Time Series Section */
        .time-series-section {
            margin-bottom: var(--spacing-xl);
        }

        .forecast-controls {
            display: flex;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
            align-items: center;
        }

        .forecast-period {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .forecast-period label {
            font-weight: 500;
            color: var(--blackfont-color);
        }

        .forecast-period select {
            padding: var(--spacing-sm);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            background: var(--inputfield-color);
        }

        /* Regression Analysis */
        .regression-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-xl);
            margin-bottom: var(--spacing-xl);
        }

        .factor-rankings {
            margin-top: var(--spacing-lg);
        }

        .factor-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--spacing-md);
            border-bottom: 1px solid var(--border-color);
        }

        .factor-name {
            font-weight: 500;
            color: var(--blackfont-color);
        }

        .factor-importance {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .importance-bar {
            width: 100px;
            height: 8px;
            background: var(--light-gray);
            border-radius: var(--radius-sm);
            overflow: hidden;
        }

        .importance-fill {
            height: 100%;
            background: var(--primary-gradient);
            transition: width var(--transition-normal);
        }

        .importance-score {
            font-weight: 600;
            color: var(--blackfont-color);
            font-size: var(--font-size-sm);
        }

        .significance-indicator {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            margin-top: var(--spacing-sm);
        }

        .significance-star {
            color: var(--warning-yellow);
        }

        .significance-text {
            color: var(--medium-gray);
            font-size: var(--font-size-sm);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }

        .stat-card {
            background: var(--inputfield-color);
            border-radius: var(--radius-lg);
            padding: var(--spacing-md);
            text-align: center;
        }

        .stat-value {
            font-size: var(--font-size-xl);
            font-weight: 700;
            color: var(--blackfont-color);
            margin-bottom: var(--spacing-xs);
        }

        .stat-label {
            color: var(--medium-gray);
            font-size: var(--font-size-sm);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .regression-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .calculator-input {
                grid-template-columns: 1fr;
            }
            
            .risk-indicators {
                grid-template-columns: 1fr;
            }
            
            .forecast-controls {
                flex-direction: column;
                align-items: stretch;
            }
        }

        /* Animation Classes */
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            border: 2px solid var(--primary-blue);
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            transform: translate(-50%, -50%);
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Page Header -->
        <div class="page-header fade-in">
            <h1 class="page-title">📊 Analytics Dashboard</h1>
            <p class="page-subtitle">Comprehensive student performance analysis and predictive modeling</p>
        </div>

        <!-- Main Dashboard Grid -->
        <div class="dashboard-grid fade-in">
            <!-- Risk Assessment Panel -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div>
                        <h3 class="card-title">Risk Assessment Panel</h3>
                        <p class="card-subtitle">Calculate and monitor student risk levels</p>
                    </div>
                </div>

                <!-- Risk Calculator -->
                <div class="risk-calculator">
                    <h4 style="margin-bottom: var(--spacing-md); color: var(--blackfont-color);">Risk Score Calculator</h4>
                    <div class="calculator-input">
                        <div class="input-group">
                            <label for="attendance">Attendance Rate (%)</label>
                            <input type="number" id="attendance" value="85" min="0" max="100">
                        </div>
                        <div class="input-group">
                            <label for="grades">Grade Average (%)</label>
                            <input type="number" id="grades" value="78" min="0" max="100">
                        </div>
                        <div class="input-group">
                            <label for="assignments">Assignment Completion (%)</label>
                            <input type="number" id="assignments" value="92" min="0" max="100">
                        </div>
                        <div class="input-group">
                            <label for="engagement">Engagement Score</label>
                            <select id="engagement">
                                <option value="1">Very Low</option>
                                <option value="2">Low</option>
                                <option value="3" selected>Medium</option>
                                <option value="4">High</option>
                                <option value="5">Very High</option>
                            </select>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="calculateRisk()">
                        <i class="fas fa-calculator"></i>
                        Calculate Risk Score
                    </button>
                </div>

                <!-- Risk Result -->
                <div class="risk-result" id="riskResult">
                    <div class="risk-score medium" id="riskScore">65</div>
                    <div class="risk-level" id="riskLevel">Medium Risk</div>
                    <div class="risk-description" id="riskDescription">Student requires monitoring and targeted support</div>
                </div>

                <!-- Risk Indicators -->
                <div class="risk-indicators">
                    <div class="indicator-card high">
                        <div class="indicator-emoji">🔴</div>
                        <div class="indicator-count" id="highRiskCount">8</div>
                        <div class="indicator-label">High Risk</div>
                    </div>
                    <div class="indicator-card medium">
                        <div class="indicator-emoji">🟡</div>
                        <div class="indicator-count" id="mediumRiskCount">15</div>
                        <div class="indicator-label">Medium Risk</div>
                    </div>
                    <div class="indicator-card low">
                        <div class="indicator-emoji">🟢</div>
                        <div class="indicator-count" id="lowRiskCount">142</div>
                        <div class="indicator-label">Low Risk</div>
                    </div>
                </div>

                <!-- Color-coded Student List -->
                <div class="student-list" id="studentList">
                    <!-- Students will be populated by JavaScript -->
                </div>

                <!-- Early Warning Alerts -->
                <div class="alerts-section">
                    <h4 style="margin-bottom: var(--spacing-md); color: var(--blackfont-color);">Early Warning Alerts</h4>
                    <div id="alertsContainer">
                        <!-- Alerts will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Time Series Forecasting Section -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div>
                        <h3 class="card-title">Time Series Forecasting</h3>
                        <p class="card-subtitle">Predictive analytics for student performance</p>
                    </div>
                </div>

                <div class="forecast-controls">
                    <div class="forecast-period">
                        <label for="studentSelect">Student:</label>
                        <select id="studentSelect">
                            <option value="all">All Students</option>
                            <option value="john">John Smith</option>
                            <option value="sarah">Sarah Johnson</option>
                            <option value="mike">Mike Wilson</option>
                        </select>
                    </div>
                    <div class="forecast-period">
                        <label for="forecastPeriod">Forecast Period:</label>
                        <select id="forecastPeriod">
                            <option value="2">2 Weeks</option>
                            <option value="4" selected>4 Weeks</option>
                            <option value="8">8 Weeks</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="generateForecast()">
                        <i class="fas fa-chart-line"></i>
                        Generate Forecast
                    </button>
                </div>

                <!-- Attendance Predictions Chart -->
                <div class="chart-container">
                    <canvas id="attendanceChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Regression Analysis Section -->
        <div class="dashboard-card fade-in">
            <div class="card-header">
                <div>
                    <h3 class="card-title">Regression Analysis Display</h3>
                    <p class="card-subtitle">Statistical analysis of performance factors</p>
                </div>
                <button class="btn btn-secondary" onclick="runRegression()">
                    <i class="fas fa-chart-area"></i>
                    Run Analysis
                </button>
            </div>

            <!-- Statistics Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="correlationCoeff">0.82</div>
                    <div class="stat-label">Correlation Coefficient</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="rSquared">0.67</div>
                    <div class="stat-label">R-squared</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="pValue">0.003</div>
                    <div class="stat-label">P-value</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="sampleSize">165</div>
                    <div class="stat-label">Sample Size</div>
                </div>
            </div>

            <div class="regression-grid">
                <!-- Correlation Charts -->
                <div>
                    <h4 style="margin-bottom: var(--spacing-md); color: var(--blackfont-color);">Performance vs Attendance</h4>
                    <div class="chart-container small">
                        <canvas id="correlationChart"></canvas>
                    </div>
                </div>

                <!-- Factor Importance Rankings -->
                <div>
                    <h4 style="margin-bottom: var(--spacing-md); color: var(--blackfont-color);">Factor Importance Rankings</h4>
                    <div class="factor-rankings" id="factorRankings">
                        <!-- Factor rankings will be populated by JavaScript -->
                    </div>
                    
                    <div class="significance-indicator">
                        <i class="fas fa-star significance-star"></i>
                        <i class="fas fa-star significance-star"></i>
                        <i class="fas fa-star significance-star"></i>
                        <span class="significance-text">Statistically significant (p < 0.05)</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample data
        const studentsData = [
            { id: 1, name: 'John Smith', grade: 'Grade 10', attendance: 92, gradeAvg: 88, risk: 'low', avatar: 'JS' },
            { id: 2, name: 'Sarah Johnson', grade: 'Grade 11', attendance: 78, gradeAvg: 85, risk: 'medium', avatar: 'SJ' },
            { id: 3, name: 'Mike Wilson', grade: 'Grade 9', attendance: 65, gradeAvg: 72, risk: 'high', avatar: 'MW' },
            { id: 4, name: 'Emma Davis', grade: 'Grade 12', attendance: 95, gradeAvg: 94, risk: 'low', avatar: 'ED' },
            { id: 5, name: 'Alex Brown', grade: 'Grade 10', attendance: 82, gradeAvg: 78, risk: 'medium', avatar: 'AB' },
            { id: 6, name: 'Lisa Garcia', grade: 'Grade 11', attendance: 88, gradeAvg: 91, risk: 'low', avatar: 'LG' }
        ];

        const factorsData = [
            { name: 'Attendance Rate', importance: 0.85, significance: 'high' },
            { name: 'Assignment Completion', importance: 0.78, significance: 'high' },
            { name: 'Class Participation', importance: 0.62, significance: 'medium' },
            { name: 'Previous Grades', importance: 0.71, significance: 'high' },
            { name: 'Study Time', importance: 0.55, significance: 'medium' },
            { name: 'Socioeconomic Status', importance: 0.43, significance: 'low' }
        ];

        let attendanceChart, correlationChart;

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            populateStudentList();
            populateAlerts();
            populateFactorRankings();
            initCharts();
            calculateRisk();
        });

        // Risk calculation function
        function calculateRisk() {
            const attendance = parseFloat(document.getElementById('attendance').value);
            const grades = parseFloat(document.getElementById('grades').value);
            const assignments = parseFloat(document.getElementById('assignments').value);
            const engagement = parseFloat(document.getElementById('engagement').value);

            // Risk calculation formula (weighted average)
            const attendanceWeight = 0.3;
            const gradesWeight = 0.4;
            const assignmentsWeight = 0.2;
            const engagementWeight = 0.1;

            const riskScore = Math.round(
                (100 - attendance) * attendanceWeight +
                (100 - grades) * gradesWeight +
                (100 - assignments) * assignmentsWeight +
                (5 - engagement) * 10 * engagementWeight
            );

            const riskLevel = riskScore >= 30 ? 'high' : riskScore >= 15 ? 'medium' : 'low';
            const riskLabels = {
                'high': 'High Risk',
                'medium': 'Medium Risk',
                'low': 'Low Risk'
            };
            
            const riskDescriptions = {
                'high': 'Student requires immediate intervention and support',
                'medium': 'Student requires monitoring and targeted support',
                'low': 'Student is on track with minimal