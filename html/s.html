<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance System Flowchart</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.1/dist/mermaid.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .flowchart-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-bottom: 20px;
        }
        .nav-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        .nav-btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        .nav-btn:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }
        .nav-btn.active {
            background: #1d4ed8;
            box-shadow: 0 2px 10px rgba(29, 78, 216, 0.3);
        }
        .legend {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 3px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">San Rafael National Trade School</h1>
            <p class="text-lg text-gray-600">Attendance Monitoring System</p>
        </div>

        <!-- Navigation -->
        <div class="nav-buttons">
            <button class="nav-btn" onclick="highlightSection('login')">Login</button>
            <button class="nav-btn" onclick="highlightSection('dashboard')">Dashboard</button>
            <button class="nav-btn" onclick="highlightSection('classes')">Classes</button>
            <button class="nav-btn" onclick="highlightSection('students')">Students</button>
            <button class="nav-btn" onclick="highlightSection('attendance')">Attendance</button>
            <button class="nav-btn" onclick="highlightSection('reports')">Reports</button>
            <button class="nav-btn" onclick="resetView()">Reset</button>
        </div>

        <!-- Main Flowchart -->
        <div class="flowchart-container">
            <div id="mermaid-diagram" class="mermaid">
                flowchart TD
                    %% Login Process
                    Start([Start]) --> Login[Login Page]
                    Login --> CheckAuth{Valid Login?}
                    CheckAuth -->|Yes| Dashboard[Teacher Dashboard]
                    CheckAuth -->|No| Login
                    
                    %% Dashboard Options
                    Dashboard --> ManageClasses[Manage Classes]
                    Dashboard --> ManageStudents[Manage Students]
                    Dashboard --> MarkAttendance[Mark Attendance]
                    Dashboard --> ViewReports[View Reports]
                    Dashboard --> Logout[Logout]
                    
                    %% Class Management
                    ManageClasses --> ViewClasses[View All Classes]
                    ManageClasses --> AddClass[Add New Class]
                    ManageClasses --> EditClass[Edit Class]
                    ViewClasses --> Dashboard
                    AddClass --> ViewClasses
                    EditClass --> ViewClasses
                    
                    %% Student Management
                    ManageStudents --> ViewStudents[View All Students]
                    ManageStudents --> AddStudent[Add New Student]
                    ManageStudents --> EditStudent[Edit Student]
                    ManageStudents --> ViewProfile[View Student Profile]
                    ViewStudents --> Dashboard
                    AddStudent --> ViewStudents
                    EditStudent --> ViewStudents
                    ViewProfile --> ViewStudents
                    
                    %% Attendance Tracking
                    MarkAttendance --> SelectClass[Select Class]
                    SelectClass --> SelectDate[Select Date]
                    SelectDate --> AttendanceGrid[Attendance Grid]
                    AttendanceGrid --> MarkPresent[Mark Present/Absent]
                    MarkPresent --> SaveAttendance[Save Attendance]
                    SaveAttendance --> Dashboard
                    
                    %% Reports
                    ViewReports --> SelectReport[Select Report Type]
                    SelectReport --> AttendanceReport[Attendance Report]
                    SelectReport --> StudentReport[Student Report]
                    SelectReport --> ClassReport[Class Report]
                    AttendanceReport --> GenerateReport[Generate Report]
                    StudentReport --> GenerateReport
                    ClassReport --> GenerateReport
                    GenerateReport --> Dashboard
                    
                    %% Logout
                    Logout --> Login
                    
                    %% Styling
                    classDef loginStyle fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
                    classDef dashboardStyle fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
                    classDef processStyle fill:#fff3e0,stroke:#ff9800,stroke-width:2px
                    classDef decisionStyle fill:#fce4ec,stroke:#e91e63,stroke-width:2px
                    classDef startStyle fill:#f3e5f5,stroke:#9c27b0,stroke-width:3px
                    
                    class Start startStyle
                    class Login,CheckAuth,Logout loginStyle
                    class Dashboard dashboardStyle
                    class ManageClasses,ManageStudents,MarkAttendance,ViewReports processStyle
                    class ViewClasses,AddClass,EditClass,ViewStudents,AddStudent,EditStudent,ViewProfile processStyle
                    class SelectClass,SelectDate,AttendanceGrid,MarkPresent,SaveAttendance processStyle
                    class SelectReport,AttendanceReport,StudentReport,ClassReport,GenerateReport processStyle
            </div>
        </div>

        <!-- Legend -->
        <div class="legend">
            <h3 class="text-lg font-semibold mb-3">Legend</h3>
            <div class="grid grid-cols-2 gap-2">
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #f3e5f5; border: 2px solid #9c27b0;"></div>
                    <span>Start Point</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #e3f2fd; border: 2px solid #1976d2;"></div>
                    <span>Login/Security</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #e8f5e8; border: 2px solid #4caf50;"></div>
                    <span>Main Dashboard</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #fff3e0; border: 2px solid #ff9800;"></div>
                    <span>System Functions</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            flowchart: {
                curve: 'basis',
                nodeSpacing: 50,
                rankSpacing: 60
            },
            themeVariables: {
                primaryColor: '#ffffff',
                primaryTextColor: '#333333',
                fontFamily: 'Arial, sans-serif',
                fontSize: '14px'
            }
        });

        let currentSection = null;

        function highlightSection(section) {
            // Remove active class from all buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to clicked button
            event.target.classList.add('active');
            
            currentSection = section;
            
            // Scroll to diagram
            document.getElementById('mermaid-diagram').scrollIntoView({
                behavior: 'smooth',
                block: 'center'
            });
            
            // Simple visual feedback
            setTimeout(() => {
                const diagram = document.querySelector('#mermaid-diagram svg');
                if (diagram) {
                    diagram.style.border = '2px solid #3b82f6';
                    diagram.style.borderRadius = '8px';
                    diagram.style.transition = 'all 0.3s ease';
                    
                    setTimeout(() => {
                        diagram.style.border = 'none';
                    }, 2000);
                }
            }, 500);
        }

        function resetView() {
            currentSection = null;
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const diagram = document.querySelector('#mermaid-diagram svg');
            if (diagram) {
                diagram.style.border = 'none';
            }
        }

        // Auto-resize on window resize
        window.addEventListener('resize', function() {
            mermaid.init();
        });
    </script>
</body>
</html>